(this.webpackJsonpmahjong=this.webpackJsonpmahjong||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(27),i=n.n(o),l=(n(88),n(89),n(15)),u=n(30);!function(e){e[e.Main=0]="Main",e[e.MahJong=1]="MahJong"}(a||(a={}));var s={page:a.MahJong},d=Object(u.b)({name:"main",initialState:s,reducers:{navigate:function(e,t){e.page=t.payload}}}),m=d.actions.navigate,f=function(e){return e.main.page},y=d.reducer,p=n(154),b="da";var v=function(e){return e&&e[b]?e[b]:e.da||e.us||""},g=function(){return v({da:"Tilf\xf8j",us:"Add"})},j=function(){return v({da:"V\xe6lg spillere",us:"Choose players"})},O=function(){return v({da:"Slet spiller",us:"Delete player"})},h=function(e){return v({da:"Samlet score: ".concat(e),us:"Total score: ".concat(e)})},E=n(26),P=n(127),k=n(158),x=n(142),S=n(2),w=n(144),G=n(159),C=n(17),I=n(4),B=Object(C.b)((function(){return Object(I.z)({page:{overflow:"auto"},list:{margin:"0 10px"}})})),A=n(34),N=n(60),M=n.n(N),L=n(8);function T(e){return{id:M()(),name:e}}function D(){return{id:M()(),score:[]}}function J(e){return{calculatedPoints:0,points:0,playerId:e}}function U(e,t){return function(e,t){return Object(L.find)(e.score,(function(e){return e.playerId===t}))}(e,t.id)||J(t.id)}function W(e){if((null===e||void 0===e?void 0:e.score)&&!(e.score.length<=1)){var t=function(e){var t=Object(L.find)(e.score,(function(e){return!!e.isWinner}));return t||Object(L.maxBy)(e.score,(function(e){return e.points}))}(e);if(t){var n=t.isEast?2*t.points:t.points;t.calculatedPoints=Object(L.sumBy)(e.score,(function(e){return e.playerId===t.playerId?0:e.isEast?2*n:n})),Object(L.forEach)(e.score,(function(n){n.playerId!==t.playerId&&(n.calculatedPoints=Object(L.sumBy)(e.score,(function(e){if(e.playerId===t.playerId)return 0;var a=n.points-e.points;return e.isEast||n.isEast?2*a:a})))}))}}}var z=function(e){if(F)try{return localStorage.setItem("Main",JSON.stringify(e)),!0}catch(t){return!1}return!1},F=function(){try{var e=localStorage.getItem("");return localStorage.removeItem(""),localStorage.setItem("",e||""),null===e?localStorage.removeItem(""):localStorage.setItem("",e),!0}catch(t){return!1}}(),R={players:[],games:[],isPlaying:!1,currentPlayers:[],currentGame:D()},H=Object(u.b)({name:"mahjongOverview",initialState:R,reducers:{loadFailed:function(e){R},loadSuccess:function(e,t){var n,a,r,c,o;e.players=(null===(n=t.payload)||void 0===n?void 0:n.players)||R.players,e.games=(null===(a=t.payload)||void 0===a?void 0:a.games)||R.games,e.isPlaying=(null===(r=t.payload)||void 0===r?void 0:r.isPlaying)||R.isPlaying,e.currentPlayers=(null===(c=t.payload)||void 0===c?void 0:c.currentPlayers)||R.currentPlayers,e.currentGame=(null===(o=t.payload)||void 0===o?void 0:o.currentGame)||R.currentGame},setUsers:function(e,t){e.isPlaying||(e.currentPlayers=t.payload,K(e))},addUser:function(e,t){!e.isPlaying&&e.players&&(e.players.push(t.payload),e.currentPlayers.length<4&&e.currentPlayers.push(t.payload),K(e))},deleteUser:function(e,t){!e.isPlaying&&e.players&&(e.players=Object(L.filter)(e.players,(function(e){return e.id!==t.payload.id})),e.currentPlayers=Object(L.filter)(e.currentPlayers,(function(e){return e.id!==t.payload.id})),K(e))},newGame:function(e){!e.isPlaying&&e.currentPlayers.length>0&&(e.isPlaying=!0,K(e))},updateScore:function(e,t){!function(e,t){var n,a=Object(L.find)(null===(n=e.currentGame)||void 0===n?void 0:n.score,(function(e){return e.playerId===(null===t||void 0===t?void 0:t.playerId)}));a&&(e.currentGame.score=[].concat(Object(A.a)(Object(L.without)(e.currentGame.score,a)),[t]),Object(L.forEach)(e.currentGame.score,(function(e){t.isWinner&&(e.isWinner=!1),t.isEast&&(e.isEast=!1)})),W(e.currentGame),z(e))}(e,t.payload)},cancelGame:function(e){e.isPlaying&&(e.isPlaying=!1,e.currentGame=D())},saveGame:function(e){e.isPlaying&&(e.games=[].concat(Object(A.a)(e.games),[e.currentGame]),e.currentGame=D(),e.isPlaying=!1,z(e))}}});function K(e){e.currentPlayers=Object(L.uniqBy)(e.currentPlayers,(function(e){return e.id})),e.currentGame.score=Object(L.map)(e.currentPlayers,(function(t,n){return Object(L.find)(e.currentGame.score,(function(e){return e.playerId===t.id}))||J(t.id)})),z(e)}var Q=H.actions,V=Q.loadFailed,_=Q.loadSuccess,q=H.actions,$=q.setUsers,X=q.addUser,Y=q.deleteUser,Z=(q.newGame,q.updateScore),ee=(q.cancelGame,q.saveGame,function(){return function(e){e(F?_(function(){if(F)try{return JSON.parse(localStorage.getItem("Main")||"")}catch(e){return null}return null}()):V())}}),te=function(e){return e.mahjongOverview.players||[]},ne=function(e){return e.mahjongOverview.currentGame||[]},ae=function(e){return e.mahjongOverview.currentPlayers||[]},re=H.reducer,ce=n(143),oe=n(149),ie=n(157),le=n(153),ue=n(146),se=Object(C.b)((function(){return Object(I.z)({wrapper:{display:"flex",alignItems:"flex-end",margin:"30px 5px"}})}));function de(e){var t=Object(P.a)()(se),n={footer:{root:{margin:"5px"}},combobox:{root:{margin:"5px"}},firstRoot:{root:{flexGrow:"1",flexShrink:"1"}},firstContainer:{container:{flexGrow:"1",flexShrink:"1"}}},a=e.isOpen,o=e.onSave,i=e.onDelete,l=e.onAdd,u=e.allPlayers,s=e.currentPlayers,d=c.a.useState([]),m=Object(E.a)(d,2),f=m[0],y=m[1],p=c.a.useState(""),b=Object(E.a)(p,2),j=b[0],h=b[1],k=c.a.useState(null),x=Object(E.a)(k,2),S=x[0],w=x[1];Object(r.useEffect)((function(){for(var e=Object(A.a)(s),t=e.length;t<4;t++)e.push(T(""));y(e)}),[s]);var G=function(){o(Object(L.filter)(f,(function(e){return!Object(L.isEmpty)(e.name)})))},C=[{key:"_",text:""}].concat(Object(A.a)(Object(L.map)(u,(function(e){return{key:e.id,text:e.name,data:e}})))),I=function(e){var t=Object(L.filter)(C,(function(t){return t.key===e.id||!Object(L.find)(f,(function(e){return t.key===e.id}))}));return 1===t.length?[]:t},B=Object(L.map)(f,(function(e,t){return function(e,t){return c.a.createElement(ce.a,{key:t,"aria-label":"",selectedKey:e.id,autoComplete:"on",options:I(e),onChange:(a=t,function(e,t){var n=Object(A.a)(f);n.length>a&&(n[a]=(null===t||void 0===t?void 0:t.data)||T("")),y(n)}),styles:n.combobox});var a}(e,t)})),N=function(e,t){h(t||"")},M=function(){Object(L.isEmpty)(j)||l(T(j))},D=function(e,t){w(null===t||void 0===t?void 0:t.data)},J=function(){S&&i(S)};return c.a.createElement("div",null,c.a.createElement(ue.a,{isOpen:a,onDismiss:G,headerText:v({da:"V\xe6lg spillere",us:"Choose players"}),closeButtonAriaLabel:v({da:"Luk",us:"Close"}),onRenderFooterContent:function(){return c.a.createElement("div",null,c.a.createElement(le.a,{styles:n.footer,onClick:G},v({da:"Ok"})))},isFooterAtBottom:!0},B,c.a.createElement("div",{className:t.wrapper},c.a.createElement(oe.a,{label:v({da:"Tilf\xf8j ny spiller",us:"Add new player"}),value:j,onChange:N,styles:n.firstRoot}),c.a.createElement(ie.a,{iconProps:{iconName:"Add"},onClick:M,title:g(),ariaLabel:g(),disabled:Object(L.isEmpty)(j)})),c.a.createElement("div",{className:t.wrapper},c.a.createElement(ce.a,{label:v({da:"Slet spiller",us:"Delete player"}),"aria-label":"",autoComplete:"on",selectedKey:null===S||void 0===S?void 0:S.id,options:1===C.length?[]:C,onChange:D,styles:n.firstContainer}),c.a.createElement(ie.a,{iconProps:{iconName:"Delete"},onClick:J,title:O(),ariaLabel:O(),disabled:Object(L.isEmpty)(null===S||void 0===S?void 0:S.id)}))))}var me=Object(C.b)((function(){return Object(I.z)({page:{overflow:"auto"}})}));function fe(e){var t=Object(P.a)()(me),n=Object(r.useMemo)((function(){return{commandBar:{root:{padding:"5px"}},dashboard:{root:{padding:"24px 0 0 0"}}}}),void 0),a=e.user,o=e.onNavigateBack,i=Object(l.c)(ne),u=c.a.useState(void 0),s=Object(E.a)(u,2),d=s[0],m=s[1];Object(r.useEffect)((function(){a&&i&&m(U(i,a))}),[a,i]);var f=Object(l.b)(),y=[{key:"Back",name:v({da:"Tilbage",us:"Back"}),iconProps:{iconName:"Back"},onClick:function(){d&&f(Z(d)),o()}}];return c.a.createElement("div",{className:t.page},c.a.createElement(w.a,{items:y,styles:n.commandBar}))}function ye(){var e=Object(P.a)()(B),t={commandBar:{root:{padding:"5px"}},dashboard:{root:{padding:"24px 0 0 0"}},listItem:{root:{maxWidth:"100%",width:"100%",padding:"20px 10px 20px 20px",margin:"10px 0"},flexContainer:{justifyContent:"flex-start"}}},n=c.a.useState(!1),o=Object(E.a)(n,2),i=o[0],u=o[1],s=c.a.useState(void 0),d=Object(E.a)(s,2),f=d[0],y=d[1],p=Object(l.c)(te),b=Object(l.c)(ae),g=Object(l.c)(ae),O=(Object(l.c)(ne),Object(l.b)());Object(r.useEffect)((function(){O(ee())}),[O]);var C=function(e){return function(){y(e)}},I=[{key:"Back",name:v({da:"Hjem",us:"Home"}),iconProps:{iconName:"Home"},onClick:function(){O(m(a.Main))}},{key:"Select",name:j(),iconProps:{iconName:"People"},ariaLabel:j(),onClick:function(){return u(!0)}}];return f?c.a.createElement(fe,{user:f,onNavigateBack:function(){return y(void 0)}}):c.a.createElement("div",{className:e.page},c.a.createElement(w.a,{items:I,styles:t.commandBar}),c.a.createElement(de,{isOpen:i,onSave:function(e){O($(e)),u(!1)},onDelete:function(e){O(Y(e))},onAdd:function(e){O(X(e))},allPlayers:p,currentPlayers:b}),c.a.createElement(G.a,{className:e.list,items:g,onRenderCell:function(e){return c.a.createElement(k.a,{styles:t.listItem,onClick:C(e)},c.a.createElement(x.a,{text:null===e||void 0===e?void 0:e.name,secondaryText:(n=7,v({da:"Score: ".concat(n),us:"Score: ".concat(n)})),tertiaryText:h(42),optionalText:"",size:S.c.size72}));var n}}))}function pe(){var e=Object(l.c)(f),t=Object(l.b)();switch(e){case a.MahJong:return c.a.createElement(ye,null);case a.Main:return c.a.createElement(p.a,{selectedKey:"key0",ariaLabel:"Nav basic example",groups:[{links:[{name:v({da:"MahJong"}),url:"",key:"key0",target:"_blank",onClick:function(){t(m(a.MahJong))}}]}]})}}var be=n(141),ve=Object(u.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),ge=ve.actions,je=(ge.increment,ge.decrement,ge.incrementByAmount,ve.reducer),Oe=Object(u.a)({reducer:{counter:je,main:y,mahjongOverview:re}}),he=n(140),Ee=Object(I.y)({palette:{themePrimary:"#2266e3",themeLighterAlt:"#f5f8fe",themeLighter:"#d8e4fb",themeLight:"#b8cef7",themeTertiary:"#759fee",themeSecondary:"#3a76e6",themeDarkAlt:"#1f5bcc",themeDark:"#1a4dac",themeDarker:"#13397f",neutralLighterAlt:"#faf9f8",neutralLighter:"#f3f2f1",neutralLight:"#edebe9",neutralQuaternaryAlt:"#e1dfdd",neutralQuaternary:"#d0d0d0",neutralTertiaryAlt:"#c8c6c4",neutralTertiary:"#a19f9d",neutralSecondary:"#605e5c",neutralPrimaryAlt:"#3b3a39",neutralPrimary:"#323130",neutralDark:"#201f1e",black:"#000000",white:"#ffffff"}}),Pe=function(){return Object(r.useEffect)((function(){Object(be.a)()})),c.a.createElement(c.a.StrictMode,null,c.a.createElement(l.a,{store:Oe},c.a.createElement(he.a,{theme:Ee},c.a.createElement(pe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,n){e.exports=n(104)},88:function(e,t,n){},89:function(e,t,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.fdc731ae.chunk.js.map